Detecção de hardware:

# lspci | grep -i VGA

Gen 9.5 CoffeLake

Para suporte a OpenCL:

# emerge - av intel-compute-runtime

Para sistemas que usem Skylake ou mais recente é necessario instalar:

# emerge -av linux-firmware


Para configurar é compilar DMC firmware no kernel, neste caso, i915/skl_dmc_ver1_27.bin:

Device Drivers  --->
    Generic Driver Options  --->
            Firmware loader  --->
                -*- Firmware loading facility
                (i915/skl_dmc_ver1_27.bin) Build named firmware blobs into the kernel binary
                (/lib/firmware) Firmware blobs root directory
Aviso:

Including the firmware in-kernel may cause suspend-to-ram to fail, if this is a concern don't include the blob built into the kernel, instead, add the firmware blob into the initramfs.

GuC/HuC firmware

# nano /etc/default/grub

na linha do kernel colocar i915.enable_guc=3

Aviso:
Enabling GuC/HuC firmware loading could cause issues on some systems, disable it if you experience freezing (for example, after resuming from hibernation).

To identify the firmware file name, either by checking /var/log/kern.log:

Or by grepping the MODULE_FIRMWARE in kernel source tree:

user $grep -rB1 'MODULE_FIRMWARE.*SKL' /usr/src/linux/drivers/gpu/drm/i915

Then configure to build the firmware file into the kernel as above.

Kernel
The following kernel options need to be activated:

KERNEL Prior to Linux 4.4
Processor type and features  --->
    [*] MTRR (Memory Type Range Register) support
Device Drivers  --->
    Graphics support  --->
        <*> /dev/agpgart (AGP Support)  --->
             <*> Intel 440LX/BX/GX, I8xx and E7x05 chipset support
        <*> Direct Rendering Manager (XFree86 4.1.0 and higher DRI support) --->
            <*> Intel 8xx/9xx/G3x/G4x/HD Graphics
            [*]   Enable modesetting on intel by default
            [*]   Enable legacy fbdev support for the modesetting intel driver
The legacy fbdev support is required since kernel 3.14.14 at least for i915 (CONFIG_DRM_I915_FBDEV=y).[2][3] For hybrid Intel/AMD system, follow also the steps of radeon (open source) or fglrx (closed binary) drivers.

Since kernel version 4.4 the driver has been moved and the legacy fbdev support is now CONFIG_DRM_FBDEV_EMULATION=y.

KERNEL Linux 5.4
Device Drivers  --->
            Graphics support  --->
                <*> /dev/agpgart (AGP Support)  --->
                    --- /dev/agpgart (AGP Support)
                    -*-   Intel 440LX/BX/GX, I8xx and E7x05 chipset support
                <*> Direct Rendering Manager (XFree86 4.1.0 and higher DRI support)  --->
                    --- Direct Rendering Manager (XFree86 4.1.0 and higher DRI support)
                    [*]   Enable legacy fbdev support for your modesetting driver
                <*> Intel 8xx/9xx/G3x/G4x/HD Graphics
                [ ]   Enable alpha quality support for new Intel hardware by default
                ()    Force probe driver for selected new Intel hardware
                [*]   Enable capturing GPU state following a hang
                [*]     Compress GPU error state
                [*]   Always enable userptr support
                [ ]   Enable Intel GVT-g graphics virtualization host support
